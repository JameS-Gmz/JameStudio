<div class="developer-panel">
  <h1>{{ translate('developer.myProjects') }}</h1>
  
  <div *ngIf="loading" class="loading">
    {{ translate('developer.loading') }}
  </div>

  <div *ngIf="error" class="error">
    {{ error }}
  </div>

  <div *ngIf="!loading && !error" class="projects-list">
    <div *ngFor="let project of projects" class="project-card">
      <div class="project-header">
        <h2>{{ translationService.getMultilingualText(project.title) }}</h2>
        <div class="project-actions">
          <button class="edit-btn" (click)="editProject(project)">{{ translate('developer.edit') }}</button>
          <button class="delete-btn" (click)="requestDeleteProject(project.id)" *ngIf="!showDeleteConfirm || projectToDelete !== project.id">{{ translate('developer.delete') }}</button>
        </div>
        
        <div *ngIf="showDeleteConfirm && projectToDelete === project.id" class="delete-confirmation">
          <p>{{ translate('developer.deleteConfirm') }}</p>
          <div class="confirmation-actions">
            <button class="confirm-button" (click)="confirmDeleteProject()">
              <i class="fas fa-check"></i>
              {{ translate('developer.yes') }}
            </button>
            <button class="cancel-button" (click)="cancelDeleteProject()">
              <i class="fas fa-times"></i>
              {{ translate('developer.no') }}
            </button>
          </div>
        </div>
      </div>
      
      <div class="project-info">
        <p><strong>{{ translate('developer.description') }}</strong> {{ translationService.getMultilingualText(project.description) }}</p>
        <div *ngIf="project.technologies && project.technologies.length > 0" class="technologies">
          <strong>{{ translate('developer.technologies') }}</strong>
          <span *ngFor="let tech of project.technologies" class="tech-tag">{{tech}}</span>
        </div>
        <p *ngIf="project.github"><strong>{{ translate('projects.github') }} :</strong> <a [href]="project.github" target="_blank">{{ project.github }}</a></p>
        <p *ngIf="project.demo"><strong>{{ translate('projects.demo') }} :</strong> <a [href]="project.demo" target="_blank">{{ project.demo }}</a></p>
        <p><strong>{{ translate('projects.lastUpdate') }} :</strong> {{ project.updatedAt | date:'mediumDate' }}</p>
      </div>
    </div>

    <div *ngIf="projects.length === 0" class="no-projects">
      {{ translate('developer.noProjects') }}
    </div>

    <div *ngIf="isEditing && selectedProject" class="edit-form" id="editForm">
      <h2>{{ translate('developer.editProject') }}</h2>
      <form (ngSubmit)="updateProject()">
        <div class="form-group">
          <label>{{ translate('developer.title') }}</label>
          <div class="multilingual-input">
            <div class="lang-input-group">
              <label class="lang-label">{{ translate('form.titleFr') }}</label>
              <input type="text" id="titleFr" [(ngModel)]="selectedProject.titleFr" name="titleFr">
            </div>
            <div class="lang-input-group">
              <label class="lang-label">{{ translate('form.titleEn') }}</label>
              <input type="text" id="titleEn" [(ngModel)]="selectedProject.titleEn" name="titleEn">
            </div>
          </div>
        </div>

        <div class="form-group">
          <label>{{ translate('form.description') }}</label>
          <div class="multilingual-input">
            <div class="lang-input-group">
              <label class="lang-label">{{ translate('form.descriptionFr') }}</label>
              <textarea id="descriptionFr" [(ngModel)]="selectedProject.descriptionFr" name="descriptionFr" rows="4"></textarea>
            </div>
            <div class="lang-input-group">
              <label class="lang-label">{{ translate('form.descriptionEn') }}</label>
              <textarea id="descriptionEn" [(ngModel)]="selectedProject.descriptionEn" name="descriptionEn" rows="4"></textarea>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="technologies">{{ translate('developer.technologiesComma') }}</label>
          <input type="text" id="technologies" [(ngModel)]="selectedProject.technologies" name="technologies" 
                 [value]="selectedProject.technologies?.join(', ')">
        </div>

        <div class="form-group">
          <label for="github">{{ translate('form.githubLink') }}</label>
          <input type="url" id="github" [(ngModel)]="selectedProject.github" name="github">
        </div>

        <div class="form-group">
          <label for="demo">{{ translate('form.demoLink') }}</label>
          <input type="url" id="demo" [(ngModel)]="selectedProject.demo" name="demo">
        </div>

        <div class="form-group">
          <label for="authorStudio">{{ translate('developer.authorStudio') }}</label>
          <input type="text" id="authorStudio" [(ngModel)]="selectedProject.authorStudio" name="authorStudio">
        </div>

        <div class="form-actions">
          <button type="submit" class="btn-save">{{ translate('developer.save') }}</button>
          <button type="button" class="btn-cancel" (click)="cancelEdit()">{{ translate('developer.cancel') }}</button>
        </div>
      </form>
    </div>
  </div>
</div>
